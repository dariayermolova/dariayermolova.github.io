function decom_manual_authorization(){jQuery(".login_box #authorization_form").submit(function(e){jQuery("#error_auth").hide(150),jQuery.ajax({type:"POST",dataType:"json",url:ajax_login_object.ajaxurl,data:{action:"ajaxlogin",username:jQuery(".login_box #log").val(),password:jQuery(".login_box #pwd").val(),security:jQuery(".login_box #security").val()},success:function(e){jQuery(".login_box .status_login").text(e.message),1==e.loggedin?document.location.href=ajax_login_object.redirecturl:jQuery("#error_auth").show(100)}}),e.preventDefault()})}$=jQuery.noConflict();var globalAddPicture=!1;jQuery(function(){decom.expiredEditComments(),decom.showLoadPicture(),decom.bestComments(),decom.resizeImage(),decom.paginate(),decom.liveFunctions(),decom.focuss(),decom.labels();var e=decom.getURLParameter("comment");e&&decom.scrollToId("comment-"+e,500),jQuery("[name^=decom_pictures]").on("change",function(){jQuery(".decom-popup-holder .decom-addfile-send").removeAttr("disabled")})}),jQuery(window).on("load",function(){jQuery(".decomments-pictures-holder").find('img[src$=".gif"]').addClass("gifimg"),jQuery(".gifimg").parents(".thickbox").addClass("decomments-gif"),jQuery(".decomments-comment-body").length<=0&&jQuery("#decomments-form-add-comment").length>0&&(decom.getSortComments(""),decom.console_log("comments load ...")),jQuery(document).on("click",".decomments-date-link",function(e){e.preventDefault();var t=jQuery(this).attr("href"),o=jQuery(this).offset().top-100;window.history.pushState("object or string","Title",t),jQuery("body,html").animate({scrollTop:o},400)}),jQuery(document).on("click",".de-select dt",function(){var e=jQuery(this).parent();jQuery(document).find(".de-select").find("dt").removeClass("active"),jQuery(this).toggleClass("active")}),jQuery(document).on("click","#decomments-login-form-another",function(){decom.showEnterForm()}),jQuery(document).on("click",".de-select dd a",function(){var e=jQuery(this).parent().parent(),t=e.find("dt");return jQuery(this).hasClass("current")||(e.find("a").removeClass("current"),jQuery(this).addClass("current"),t.removeClass("active").html(jQuery(this).text())),!1}),jQuery(document).on("click",function(e){jQuery(e.target).parents().hasClass("de-select")||jQuery(e.target).hasClass("de-select")||jQuery(e.target).parents().hasClass("de-select-tab")||jQuery(e.target).hasClass("de-select-tab")||jQuery(".de-select dt, .de-select-tab dt").removeClass("active")}),jQuery("img.svg").length&&jQuery("img.svg").each(function(){var e=jQuery(this),t=e.attr("id"),o=e.attr("class"),m=e.attr("src"),n=e.attr("width"),d=e.attr("height");jQuery.get(m,function(m){var c=jQuery(m).find("svg");"undefined"!=typeof t&&(c=c.attr("id",t)),"undefined"!=typeof o&&(c=c.attr("class",o+" replaced-svg")),"undefined"!=typeof n&&(c=c.attr("width",n)),"undefined"!=typeof d&&(c=c.attr("height",d)),c=c.removeAttr("xmlns:a"),e.replaceWith(c)},"xml")})});var decom={cfocus:!1,debug_enable:!1,site_url:"",admin_ajax:"",post_id:0,user_id:0,is_need_logged:0,lang:!1,text_lang_comment_deleted:"",text_lang_edited:"",text_lang_delete:"",text_lang_not_zero:"",text_lang_required:"",text_lang_checked:"",text_lang_completed:"",text_lang_items_deleted:"",text_lang_close:"",text_lang_loading:"",multiple_vote:0,console_log:function(e){decom.debug_enable&&console.log(e)},getURLParameter:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null},focuss:function(){jQuery(".decomments-addform-body").find("textarea").focus(function(){jQuery(this).parents(".decomments-addform-body").addClass("tfocus")}).blur(function(){jQuery(this).parents(".decomments-addform-body").removeClass("tfocus")})},labels:function(){decom.get_data(),jQuery(".de-form-field").length&&(jQuery(".de-form-field").each(function(){var e=jQuery(this);""!==e.find("input").val()&&e.addClass("de-field-complete")}),jQuery(".de-form-field").find("input").focus(function(){var e=jQuery(this);""===e.val()&&e.parent().addClass("de-field-focus")}).blur(function(){var e=jQuery(this);""===e.val()&&e.parent().removeClass("de-field-focus").removeClass("de-field-complete")}))},liveFunctions:function(){jQuery(document).on("click",".decomments-dislike-link",function(){decom.votes(this)}),jQuery(document).on("click",".decomments-like-link",function(){decom.votes(this)}),jQuery(document).on("click",".decomments-tw-link",function(){return decom.tweet(this),!1}),jQuery(document).on("click",".decomments-fb-link",function(){return decom.facebook(this),!1}),jQuery(document).on("click",".decomments-vk-link",function(){return decom.vkontakte(this),!1}),jQuery(document).on("click",".decomments-gp-link",function(){return decom.google(this),!1}),jQuery(document).on("click",".decomments-ln-link",function(){return decom.linkedin(this),!1}),jQuery(document).on("click",".decomments-oc-link",function(){return decom.od(this),!1}),jQuery(document).on("click",".decomments-checkbox",function(){decom.checkSubscribe(this)}),jQuery(document).on("click",".decomments-button-quote-send",function(){decom.insertQuote()}),jQuery(document).on("click",".decomments-button-quote-cancel",function(){decom.closeQuote()}),jQuery(document).on("click",".decomments-button-addfile-send",function(){decom.insertPicture(this)}),jQuery(document).on("click",".decomments-button-addfile-cancel",function(){decom.closePicture()}),jQuery(document).on("click",".decomments-button-send",function(){var e=jQuery(this),t=e.data("edit");jQuery(".decomments-commentform-message").slideUp(),jQuery(".decomments-addform-body .decomments-loading").addClass("active"),t||(document.getElementById("decom-mail-author")?decom.verifyEmail(e):decom.sendComment(e))}),jQuery(document).on("click",".decomments-button-reply",function(){decom.replyComment(this)}),jQuery(document).on("click",".decomments-button-cancel",function(){decom.cancelComment(this)}),jQuery(document).on("click",".decomments-button-delete",function(){decom.deleteComment(this)}),jQuery(document).on("click",".decomments-button-edit",function(){decom.editComment(this)}),jQuery(document).on("click","#decomments-button-social-loginshow",function(){return decom.showLoginForm(this),!1}),jQuery(document).on("click","#decomments-show-loginform",function(){return decom.showLoginForm(this),!1}),jQuery(document).on("click","#decomments-show-enterform",function(){return decom.showEnterForm(this),!1}),jQuery(document).on("submit","#decomments-loginform",function(){return decom.sendAuthorizationForm(this),!1}),jQuery(document).on("click",function(e){if(jQuery(e.target).hasClass("decomments-buttons-moderate")){var t=jQuery(e.target),o=t;jQuery(".decomments-buttons-moderate").removeClass("active"),o.toggleClass("active")}else if(jQuery(e.target).parents("a").hasClass("decomments-buttons-moderate")){var t=jQuery(e.target).parents("a"),o=t;jQuery(".decomments-buttons-moderate").removeClass("active"),o.toggleClass("active")}else jQuery(e.target).parents().hasClass("moderate-action")||jQuery(".decomments-buttons-moderate").removeClass("active")}),jQuery(document).on("click",".moderate-action a",function(e){e.preventDefault(),jQuery(this).hasClass("decomments-link-edit")?(decom.editComment(this),jQuery(this).parent().toggleClass("active")):jQuery(this).hasClass("decomments-link-remove-all-comments-user")?(decom.deleteAllUserComments(this),jQuery(this).parent().toggleClass("active")):jQuery(this).hasClass("decomments-link-block-user")?(decom.blockUserComments(this),jQuery(this).parent().toggleClass("active")):jQuery(this).hasClass("decomments-link-unblock-user")?(decom.blockUserComments(this),jQuery(this).parent().toggleClass("active")):(decom.deleteComment(this),jQuery(this).parent().toggleClass("active"))}),jQuery(document).on("click","#comment-nav-below .decomments-nav-next, #comment-nav-below .decomments-nav-previous",function(e){return decom.ajaxPaginate(this),!1}),jQuery(document).on("click",".decom-cancel",function(){decom.cancel()}),jQuery(document).on("click",".decom-manual-authorization",function(){decom_manual_authorization()})},cancel:function(){decom.get_data(),jQuery(".decom-add-holder textarea").val(""),jQuery(".decom-message-error").html(""),jQuery(".decom-add-picture").removeClass("decom-file-uploaded"),jQuery(".decom-pictures-holder").removeClass("decom_action_delete_image"),jQuery(".decom-pictures-holder").show()},getParentObj:function(e){return jQuery(e).parents("[id^=comment-]")},getId:function(e){if("undefined"!=typeof e){var t=e.split("-");return t[t.length-1]}},writeAlert:function(e){var t=e.replace(/^[\S\s]*<body[^>]*?>/i,"").replace(/<\/body[\S\s]*$/i,"");t=jQuery(t),decom.is_need_logged&&decom.showLoginForm(),jQuery(".decomments-commentform-message span").html(t.html()),jQuery(".decomments-commentform-message").slideDown()},writeResponse:function(e){var t=jQuery(e),o=t.attr("id"),m=decom.getId(o),n=t.attr("parent-id"),d=jQuery("#decomments-form-add-comment"),c=d.attr("data-edit"),a=d.attr("data-edit-id");if("true"===c);else{if("0"!=n){var r=jQuery("#comment-"+n),s=r.children(".decomments-comment-reply");s.attr("class")||(r.append('<div class="decomments-comment-reply"></div>'),s=r.children(".decomments-comment-reply")),s.append(t)}else{jQuery(".decomments-comment-section").children(".decomments-comment-list").attr("class")||jQuery(".decomments-comment-section").append('<div class="decomments-comment-list"></div>');var i=jQuery(".decom_comments_sort select").val();switch(i){case"newer":var l=jQuery(".decom-nav-previous").html();if(""==l||"undefined"==typeof l){var u=jQuery(".decomments-comment-list").find(".decom-top-rated").length;u?jQuery(".decomments-top-rated").eq(u-1).parents(".decom-comment-block").after(t):jQuery(".decomments-comment-list").prepend(t),decom.scrollToId(o,500)}else decom.ajaxPaginate(m,"beginning");break;case"older":var f=jQuery(".decom-nav-next").html();""==f||"undefined"==typeof f?(jQuery(".decomments-comment-list").append(t),decom.scrollToId(o,500)):decom.ajaxPaginate(m,"end");break;case"rate":default:jQuery(".decomments-comment-list").append(t),decom.scrollToId(o,800)}}jQuery(".decomments-addform-body textarea").val(""),jQuery("#decom_default_position_form_add").after(d)}decom.setCommentsNumber(1),decom.recalculationCommentsNumbers(m,1)},scrollToId:function(e,t){jQuery("body").animate({scrollTop:jQuery("#"+e).offset().top-250},t)},editComment:function(e){decom.get_data();var t=jQuery(e).parents(".decomments-comment-block"),o=decom.getId(t.attr("id")),m=jQuery(e).parents(".comment").attr("id"),n=jQuery("#decomments-form-add-comment"),d=t.find(".decomments-description-block").eq(0),c=jQuery("#comment-"+o),a=d.find(".decomments-comment-main"),r=a.find(".decomments-text-holder").height(),s=a.find(".decomments-pictures-holder"),i=a.clone(),l=jQuery("#"+m).find(".decomments-description-block").eq(0).find(".decomments-comment-main"),u=l.find(".decomments-text-holder"),f=u.html(),y=n.find(".decomments-button-send").html();return jQuery(".decomments-button-cancel").trigger("click"),jQuery(".decomments-commentform-message span").html(""),jQuery(".decomments-commentform-message").slideUp(),l.parent().attr("data-html-f",l.html()).addClass("decomments-comment-edit-codition").append(n),n.find("textarea").addClass("active"),jQuery(".decomments-addform-body").find(".decomments-loading").addClass("active"),n.addClass("decomments-form-edit").find("textarea").val(""),n.find(".decomments-button-send").hide(),jQuery.ajax({type:"GET",url:decom.admin_ajax+"?lang="+decom.lang,dataType:"json",data:"action=decom_get_comment&comment_id="+o,success:function(e){decom.console_log(e),e.content&&(decom.console_log(m),jQuery(".decomments-addform-body").find("textarea").removeAttr("disabled","disabled"),jQuery(".decomments-addform-body").find(".decomments-loading").removeClass("active"),n.addClass("decomments-form-edit").find("textarea").val(e.content),n.find(".decomments-button-send").addClass("decomments-button-save").removeClass("decomments-button-send").html(e.name_button).attr("data-edit","true").attr("onclick","decom.saveEditComment(this)").attr("data-m-n",y),n.find(".decomments-button-save").show(),n.attr("data-edit","true"),n.attr("data-edit-id",m),n.find("textarea").focus())}}),s.length&&(n.find("textarea").after(s),s.append('<a href="javascript:void(0);" onclick="decom.deletePicture(this);" class="decomments-delete-image"><i class="decomments-icon-trash-o"></i> '+decom.text_lang_delete+"</a>")),jQuery("body,html").stop().animate({scrollTop:jQuery("#"+m).offset().top-200},400),jQuery(document).on("click","#decomments-form-add-comment .decomments-button-cancel",function(){var e=d.find(".decomments-title-block");l.parent().removeClass("decomments-comment-edit-codition");var t=l.parent().attr("data-html-f");return t&&l.html(l.parent().attr("data-html-f")),n.find(".decomments-button-save").addClass("decomments-button-send").removeClass("decomments-button-save").html(y).attr("data-edit","false").removeAttr("onclick"),n.removeAttr("data-edit"),n.removeAttr("data-edit-id"),n.find(".decomments-pictures-holder").length&&n.find(".decomments-pictures-holder").remove(),n.find("textarea").removeAttr("style"),jQuery("body,html").stop().animate({scrollTop:jQuery("#"+m).offset().top-200},400),i=void 0,!1}),!1},saveEditComment:function(e){decom.get_data();var t=jQuery(e).parent(),o=jQuery(e),m=t.parent().data("edit-id"),n=jQuery(e).parents(".decomments-comment-block"),m=decom.getId(n.attr("id")),d=jQuery("#comment-"+m).find(".decomments-description-block").eq(0).find(".decomments-comment-main");t.find("textarea").attr("disabled","disabled");var c=encodeURIComponent(t.find("textarea").val());jQuery(".decomments-addform-body").find(".decomments-loading").addClass("active"),jQuery.ajax({type:"POST",url:decom.admin_ajax+"?lang="+decom.lang,dataType:"json",data:"action=decom_save_edit_comment&comment_id="+m+"&content="+c,success:function(n){jQuery(".decomments-addform-body").find(".decomments-loading").removeClass("active"),"success"==n.result&&(decom.cancelComment(e),d.parent().removeClass("decomments-comment-edit-codition"),d.parent().attr("data-html-f",""),t.find(".decomments-button-save").addClass("decomments-button-send").removeClass("decomments-button-save").html(o.data("m-n")),o.removeAttr("data-m-n"),t.removeAttr("data-edit"),t.removeAttr("data-edit-id"),t.find(".decomments-pictures-holder").length&&t.find(".decomments-pictures-holder").remove(),t.find("textarea").removeAttr("style"),t.find("textarea").removeAttr("disabled"),jQuery(".decomments-button-save").off(),jQuery("body,html").stop().animate({scrollTop:jQuery("#comment-"+m).offset().top-200},400),jQuery(".decomments-content-"+m).html(n.content))}})},deleteAllUserComments:function(e){decom.get_data();var t=jQuery(e).data("user-id"),o=jQuery(e).data("user-email"),m=jQuery(e).parents(".decomments-description-block"),n=decom.getId(decom.getParentObj(e).attr("id"));m.css({opacity:".3"}),jQuery.ajax({type:"POST",url:decom.admin_ajax+"?lang="+decom.lang,dataType:"json",data:"action=delete_all_user_comment&user_id="+t+"&user_email="+o,success:function(e){console.log(e),"success"==e.result&&jQuery(e.id_blocks).each(function(){var e=jQuery(this),t=e.find(".decomments-description-block");e.addClass("trash"),t.find(".decomments-text-holder").addClass("decomments-trash-holder").html("<p>Comments User removed</p>"),t.find(".decomments-comment-body-nav").remove(),t.find(".decomments-footer-nav").remove(),t.find(".decomments-pictures-holder").remove(),t.find(".decomments-comment-social-part").remove(),decom.setCommentsNumber(-1),decom.recalculationCommentsNumbers(n,-1)}),m.css({opacity:"1"})}})},blockUserComments:function(e){decom.get_data();var t=jQuery(e).data("user-id"),o=jQuery(e).data("user-email"),m=jQuery(e).data("user-action"),n=jQuery(e).parents(".decomments-description-block"),d=decom.getId(decom.getParentObj(e).attr("id"));n.css({opacity:".3"}),jQuery.ajax({type:"POST",url:decom.admin_ajax+"?lang="+decom.lang,dataType:"json",data:"action=decomments_block_unblock_user_comments&user_id="+t+"&user_email="+o+"&user_action="+m,success:function(t){console.log(t),"success"==t.result&&(jQuery(t.id_blocks).each(function(){var e=jQuery(this),o=e.find(".decomments-description-block");e.addClass("trash"),"block"==m?n.find(".decomments-text-holder").addClass("decomments-trash-holder").html("<p>"+t.message_in_comment+"</p>"):n.find(".decomments-text-holder").addClass("decomments-trash-holder").html("<p>"+t.message_in_comment+"</p>"),o.find(".decomments-comment-body-nav").remove(),o.find(".decomments-vote").remove(),o.find(".decomments-button-reply").remove(),o.find(".decomments-share-block").remove(),o.find(".decomments-pictures-holder").remove(),o.find(".decomments-comment-social-part").remove(),decom.setCommentsNumber(-1),decom.recalculationCommentsNumbers(d,-1)}),jQuery(e).text(t.menu_action.title),jQuery(e).data("user-action",t.menu_action.user_action)),n.css({opacity:"1"})}})},removeDuplicateComments:function(e){var t=new Array,o=new Array;return jQuery(".decomments-comment-list .comment").each(function(){t.push(jQuery(this).attr("id"))}),jQuery(e+" .comments").each(function(e,m){var n=jQuery(this).attr("id");jQuery.inArray(n,t)==-1&&o.push(this)}),o},paginate:function(){jQuery(document).on("click",".decomments-ajax-paginate a",function(){var e=jQuery(this),t=e.parents(".decomments-comment-section"),o=t.find(".decomments-comment-list"),m=e.parents(".decomments-ajax-paginate"),n=parseInt(m.attr("data-page-count")),d=parseInt(m.attr("data-cur-page")),c=n==d?0:d+1,a=parseInt(m.attr("data-comments-perpage")),r=t.find(".decomments-paginate-loader"),s=parseInt(m.attr("pages-count")),i=parseInt(m.attr("page"));return e.hide(),r.show(),0!==c&&jQuery.get(decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=get_comments_by_paginate",{decom_ajax:1,post_id:decom.post_id,per_page:a,page_num:c},function(t){var d=t,a=jQuery(d).eq(0).attr("id");o.append(d);var s=jQuery(t).eq(0),i=decom.getId(s.attr("id"));decom.recalculationCommentsNumbers(i,1),c!=n&&(m.attr("data-cur-page",c),r.hide(),e.show()),c==n&&(r.hide(),e.hide()),decom.expiredEditComments()}),!1}),jQuery(document).on("click",".decomments-ajax-paginate-lazy a",function(){var e=jQuery(this),t=e.parents(".decomments-comment-section"),o=t.find(".decomments-comment-list"),m=e.parents(".decomments-ajax-paginate-lazy"),n=parseInt(m.attr("data-page-count")),d=parseInt(m.attr("data-cur-page")),c=n==d?0:d+1,a=parseInt(m.attr("data-comments-perpage")),r=t.find(".decomments-paginate-loader"),s=parseInt(m.attr("pages-count")),i=parseInt(m.attr("page"));return e.hide(),r.show(),m.addClass("loading"),0!==c&&jQuery.get(decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=get_comments_by_paginate",{decom_ajax:1,post_id:decom.post_id,per_page:a,page_num:c},function(t){var d=t,a=jQuery(d).eq(0).attr("id");o.append(d);var s=jQuery(t).eq(0),i=decom.getId(s.attr("id"));decom.recalculationCommentsNumbers(i,1),c!=n&&(m.attr("data-cur-page",c),r.hide(),e.show()),c==n&&(r.hide(),e.hide()),m.removeClass("loading"),decom.expiredEditComments()}),!1}),jQuery(document).on("scroll",jQuery(window),function(){if(jQuery(".decomments-ajax-paginate-lazy").length){var e=jQuery(".decomments-ajax-paginate-lazy"),t=jQuery(window).scrollTop(),o=jQuery(window).height(),m=jQuery(".decomments-comment-list").offset().top,n=jQuery(".decomments-comment-list").height(),d=m+n-o;t>d&&(e.find("a").is(":hidden")||e.find("a").trigger("click"))}})},ajaxPaginate:function(e,t,o){var m,n;if("undefined"==typeof t){n=jQuery(e).attr("class"),n=n.split("-"),n=n[n.length-1];var d=jQuery("#comment-nav-below"),c=jQuery(".decom_dop_bloc").find(".comment:last"),a=jQuery(".decom_dop_bloc").find(".comment:first"),r=decom.getId(a.attr("id")),s=decom.getId(c.attr("id"));decom.console_log(r),decom.console_log(s),jQuery(".decomments-comment-block").css({opacity:.2}),jQuery(".decomments-comment-list").prepend('<span class="decomments-loader" style="position:absolute; width:100%; height:100%;"><div class="loader-ball-scale"><div></div><div></div><div></div></div></span>'),m=jQuery(e).parent("a").attr("href");var i=d.attr("page")}else n=t;var l=decom.admin_ajax+"?action=decom_comments&f=ajax_paginate",u={cur_page:i,post_id:decom.post_id,actions:n};return"undefined"!=typeof t&&jQuery.extend(u,{comment_id:e}),jQuery.get(l,u,function(e){jQuery(".decom_dop_bloc").html(jQuery(e).html());var t=jQuery("#comment-nav-below"),o=t.attr("page");o>i&&decom.recalculationCommentsNumbers(s,1),o<i&&decom.recalculationCommentsNumbers(r,1),decom.console_log(n),"undefined"==typeof m&&"end"==n?m=jQuery("#fast-comment-link").attr("href"):"undefined"==typeof m&&(m=jQuery("#decom_cur_page").attr("href")),m!=window.location&&window.history.pushState(null,null,m),"end"==n||"beginning"==n?jQuery("body,html").stop().animate({scrollTop:jQuery(".decomments-head").offset().top-100},400):jQuery("body,html").stop().animate({scrollTop:jQuery(".decomments-head").offset().top-100},400),decom.expiredEditComments()}),!1},sendComment:function(e){decom.get_data();var t=jQuery("#decomments-form-add-comment textarea").val(),o=decom.validateSubscribe("subscribe_all_comments"),m=decom.validateSubscribe("subscribe_my_comment"),n=0,d=e.parents("[id^=comment-]"),c=d.length,a=jQuery("#decomments-social-icon").val(),r=jQuery(".decomments-commentform-message"),s=jQuery("#decomments-add-picture-form"),i=jQuery("#decomments-form-add-comment"),l=jQuery("#g-recaptcha-response").val(),u=new Object;if(t=decom.quoteShortcodeDecode(t),globalAddPicture||jQuery("#decomments-add-picture-form input").val(""),globalAddPicture=!1,c&&(n=decom.getId(d.attr("id")),c>4&&jQuery(d[0]).addClass("depth-disabled")),decom_comment2=t.replace(/\n/g,""),0==decom_comment2.length&&jQuery(".decomments-add-image").eq(0).hasClass("decomments-file-uploaded")){var f=(new Date).getTime();t="[decom_attached_image_"+f+"]"}var y=jQuery("#decom-name-author").val();decom.console_log(decom.site_url),u["g-recaptcha-response"]=l,u.user_id=decom.user_id,u.comment_post_ID=decom.post_id,u.author=jQuery("#decom-name-author").val(),u.email=jQuery("#decom-mail-author").val(),u.comment=t,u.url=jQuery("#decom-site-author").length?jQuery("#decom-site-author").val():"",u._wp_unfiltered_html_comment=jQuery("#_wp_unfiltered_html_comment_disabled").val(),u.comment_parent=n,u.subscribe_all_comments=o,u.subscribe_my_comment=m,u.social_icon=a,u.image_name=jQuery("#pic-name").val(),u.image_base64=jQuery("#pic-src").val(),u.decomments_send=1,jQuery("#decomments-comment-section .decomments-comment-form-custom-inputs").find("input").each(function(){var e=jQuery(this);"hidden"==e.attr("type")?u[e.attr("name")]=e.attr("value"):"checkbox"==e.attr("type")&&e.is(":checked")&&(u[e.attr("name")]=e.attr("value"))}),jQuery.ajax({url:decom.site_url+"/wp-comments-post.php",global:!1,type:"POST",dataType:"html",data:u,success:function(e){decom.console_log(e),jQuery("#pic-name").remove(),jQuery("#pic-src").remove(),jQuery(".decomments-add-image").removeAttr("data-img"),jQuery(".decomments-add-image").removeClass("decomments-file-uploaded"),jQuery(".decomments-addform-body .decomments-loading").removeClass("active");var t=!1;try{var e=JSON.parse(e)}catch(n){if(t=!0,0==jQuery(e).find(".decomments-comment-body").length){var o=e.replace(/^[\S\s]*<body[^>]*?>/i,"").replace(/<\/body[\S\s]*$/i,""),m="";o=o.replace("<p><p>",'<p id="error">').replace("</p></p>","</p>"),jQuery("<div>"+o+"</div>").find("#error").length>0?m=jQuery("<div>"+o+"</div>").find("#error").text():jQuery(o).length>0?(o=jQuery(o),m=o.html()):m=e,r.find("span").html(m),r.slideDown(),decom.is_need_logged&&decom.showLoginForm()}else r.slideUp(500,function(){r.find("span").html("Error! Please try again later")}),"true"===i.attr("data-edit")||(decom.cancelComment(),decom.writeResponse(e))}if(t)jQuery(".decomments-add-image").removeClass("decomments-file-uploaded");else{jQuery(".decomments-addform-body .decomments-loading").removeClass("active");var n=e.message;"moderation"==e.error&&(n="<em>"+n+"</em>",jQuery(".decomments-addform-body textarea").val("")),r.find("span").html(n),r.slideDown(),jQuery(".decomments-add-image").removeClass("decomments-file-uploaded")}},error:function(e,t,o){jQuery(".decomments-addform-body").find(".decomments-loading").removeClass("active");var m=e.responseText.replace(/^[\S\s]*<body[^>]*?>/i,"").replace(/<\/body[\S\s]*$/i,"");m=m.replace("<p><p>",'<p id="error">').replace("</p></p>","</p>"),m=jQuery("<div>"+m+"</div>").find("#error").text(),m?(r.find("span").html(m),r.slideDown()):decom.writeAlert(e.responseText)}})},cancelComment:function(e){decom.get_data(),jQuery(".decomments-commentform-message span").html(""),jQuery(".decomments-commentform-message").slideUp(),jQuery(".decomments-add-image").removeClass("decomments-file-uploaded");var t=jQuery("#decomments-form-add-comment"),o=jQuery("#decom_default_position_form_add");o.after(t),t.find("textarea").val(""),t.hasClass("decomments-form-edit")?t.removeClass("decomments-form-edit"):t.removeClass("decomments-form-reply")},replyComment:function(e){decom.get_data(),jQuery(".decomments-comment-edit-codition").length&&jQuery(document).find("#decomments-form-add-comment .decomments-button-cancel").trigger("click"),jQuery(".decomments-commentform-message span").html(""),jQuery(".decomments-commentform-message").slideUp(),jQuery(".decomments-add-image").removeClass("decomments-file-uploaded");var t=jQuery("#decomments-form-add-comment"),o=jQuery(e).parents(".decomments-comment-block"),m=jQuery(e).parents(".decomments-description-block");m.append(t),t.addClass("decomments-form-reply").find("textarea").focus()},deleteComment:function(e){decom.get_data();var t=jQuery(e).parents(".decomments-description-block"),o=decom.getId(decom.getParentObj(e).attr("id")),m=decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=delete_comment";t.css({opacity:".3"}),jQuery.post(m,{id:o},function(e){"success"==e.result&&"success"==e.result&&(jQuery("#comment-"+o).addClass("trash"),t.find(".decomments-text-holder").addClass("decomments-trash-holder").html("<p>"+jQuery("#decomments-comment-section").data("text_lang_comment_deleted")+"</p>"),t.find(".decomments-comment-body-nav").remove(),t.find(".decomments-footer-nav").remove(),t.find(".decomments-pictures-holder").remove(),t.find(".decomments-comment-social-part").remove(),t.css({opacity:"1"}),decom.setCommentsNumber(-1),decom.recalculationCommentsNumbers(o,-1))})},sortComments:function(e){return decom.get_data(),decom.getSortComments(jQuery(e).attr("data-sort")),!1},setCookie:function(e,t,o){o=o||{};var m=o.expires;if("number"==typeof m&&m){var n=new Date;n.setTime(n.getTime()+1e3*m),m=o.expires=n}m&&m.toUTCString&&(o.expires=m.toUTCString()),t=encodeURIComponent(t);var d=e+"="+t;for(var c in o){d+="; "+c;var a=o[c];a!==!0&&(d+="="+a)}document.cookie=d},getSortComments:function(e){decom.get_data();var t=jQuery(".decomments-comment-list").height();decom.console_log(e),jQuery(".decomments-comment-list").attr("style","min-height:"+t+"px;").empty().addClass("decomments-loading").html('<div class="loader-ball-scale lbs-remove"><div></div><div></div><div></div></div>');var o=decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=sort_comments",m={decom_comments_sort:e,post_id:decom.post_id};jQuery.ajax({type:"POST",url:o,data:m,dataType:"html",success:function(t){if(t){decom.setCookie("decomments_sort",e,{path:"/",expires:Date.now()+2592e3});var o=jQuery("<div>"+t+"</div>").find(".decomments-comment-list").html();jQuery(".decomments-comment-list").html(o),jQuery(".decomments-comment-list").removeClass("decomments-loading").removeAttr("style");var m=window.location.pathname,n=jQuery("#decom_cur_page").attr("href"),d=decom.site_url+n;n&&d!=window.location&&window.history.pushState(null,null,d),"rate"==e&&decom.bestComments()}},error:function(e){console.log(e)}})},bestComments:function(){if(decom.get_data(),"undefined"!=typeof comment_id_max){var e=jQuery("#comment-"+comment_id_max);if(jQuery(".decomments-comment-list").prepend(e),e.find(".decomments-comment-body").addClass("decomments-best-comments").removeAttr("style"),"undefined"!=typeof comment_id_max_second){var t=jQuery("#comment-"+comment_id_max_second);jQuery(e).after(t),t.find(".decomments-comment-body").addClass("decomments-best-comments").removeAttr("style")}}},verifyEmail:function(e){jQuery.post(decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=verify_email",{email:jQuery("#decom-mail-author").val()},function(t){console.log(t),"error"==t.result?(jQuery(".decomments-addform-body .decomments-loading").removeClass("active"),jQuery("#decomments-loginform").slideUp(),jQuery("#decomments-login-form-message").text(t.error),jQuery(".decomments-enterform-message").slideDown(),jQuery("#decomments-enterform").find("fieldset").slideUp()):decom.sendComment(e)})},showLoginForm:function(e){jQuery(".decomments-enterform-message").slideUp(),jQuery("#decomments-enterform").find("fieldset").slideUp(),jQuery("#decomments-loginform").slideDown()},showEnterForm:function(e){jQuery(".decomments-enterform-message").slideUp(),jQuery("#decomments-loginform").slideUp(),jQuery("#decomments-enterform").find("fieldset").slideDown()},authAndRedirect:function(){var e="",t=jQuery("#decomments-form-add-comment").parents("[id^=comment-]").attr("id"),o=jQuery(location).attr("href"),o=o.split("#")[0];e=t?"#"+t:"#decomments-form-add-comment";var m=encodeURIComponent(o+e);return o+e},sendAuthorizationForm:function(e){var t=jQuery(".decomments-loginform-message");jQuery("#decomments-loginform").css({opacity:.2}),jQuery(".decomments-addform-body .decomments-loading").addClass("active"),t.slideUp();var o={},m=jQuery(e).serializeArray();for(var n in m){var d=m[n];o[d.name]=d.value}o.action="decomments_login",jQuery.post(decom.admin_ajax,o,function(e){e&&e.loggedin?location.reload():(t.slideDown(),jQuery("#decomments-loginform").css({opacity:1}),jQuery(".decomments-addform-body .decomments-loading").removeClass("active"))})},deletePicture:function(e){decom.get_data();var t=decom.getParentObj(e),o=jQuery(e).prev().find("img").attr("rel"),m=decom.getId(decom.getParentObj(e).attr("id")),n=decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=delete_picture";jQuery(e).parent().slideUp(),jQuery.post(n,{comment_id:m,attach_id:o,post_id:decom.post_id},function(e){})},insertPicture:function(e){decom.get_data();var t=jQuery("#decomments-add-picture-form");return t.submit(function(){return!1}),""!=t.find('input[type="file"]').val()&&(globalAddPicture=!0,jQuery(".decomments-add-image").addClass("decomments-file-uploaded"),jQuery(".decomments-add-image").attr("data-img",jQuery("#decomments-add-picture-form img").attr("src")),jQuery("#decomments-add-picture-form").find(".decomments-load-img").addClass("decomments-complete"),jQuery(".decomments-button-addfile-send").attr("data-disabled","disabled")),setTimeout(function(){tb_remove(),decom.closeModal()},500),!1},showLoadPicture:function(){jQuery(document).on("change","#decomments-add-picture-form input",function(e){var t=jQuery("#decomments-add-picture-form input").get(0).files[0],o=/image.*/,m=jQuery(this),n=jQuery("#decomments-add-picture-form"),d=n.find(".decomments-addfile-cover"),c=n.find(".decomments-button-addfile-cancel"),a=n.find(".decomments-button-addfile-send");if(t.type.match(o)){var r=new FileReader,s=t.name;r.onload=function(e){var t=new Image;t.src=r.result,n.find(".decomments-load-img").html(t),n.find(".decomments-load-img").addClass("decomments-complete");var o=n.find(".decomments-load-img").height(),m=n.parents("#deco_modal_window"),i=(125+o)/2;jQuery("#decomments-comment-section").data("text_lang_choose_photo")||jQuery("#decomments-comment-section").data("text_lang_choose_photo",d.text()),d.html(s),c.css("display","none"),a.css("display","inline-block"),jQuery("#decomments-add-picture-form").addClass("added-image"),jQuery(".decomments-addform-body").append('<input type="hidden" name="decom_pictures[\'name\']" id="pic-name" value="'+s+'">'),
jQuery(".decomments-addform-body").append('<input type="hidden" name="decom_pictures[\'src\']" id="pic-src" value="'+t.src+'">')},r.readAsDataURL(t)}else jQuery("#decomments-add-picture-form .decomments-add-message").show(),jQuery(".decomments-addform-body #pic-name, .decomments-addform-body #pic-src").remove()})},removeAttachment:function(e){var t=jQuery("#decomments-add-picture-form"),o=t.find(".decomments-button-addfile-cancel"),m=t.find(".decomments-button-addfile-send");jQuery("#decomments-add-picture-form").removeClass("added-image"),jQuery(".decomments-add-image").removeClass("decomments-file-uploaded"),jQuery(".decomments-add-image").removeAttr("data-img"),o.css("display","inline-block"),m.css("display","none"),t.find(".decomments-load-img").html(""),t.find(".decomments-load-img").removeClass("decomments-complete"),jQuery(".decomments-addfile-cover").text(jQuery("#decomments-comment-section").data("text_lang_choose_photo")||"Choose file")},closePicture:function(){jQuery("#decomments-add-picture-form").find("input").val(""),jQuery(".decomments-add-img").removeClass("decomments-file-uploaded"),jQuery("#decomments-add-picture-form").submit(function(){return!1}),tb_remove()},resizeImage:function(){jQuery(document).on("mouseenter",".decomments-pictures-holder .thickbox",function(){var e=jQuery(this),t=e.prev().attr("id"),o=e.attr("rel"),m=o.split("x"),n=m[0],d=m[1],c=jQuery(window).width(),a=jQuery(window).height();if(n>c||d>a){var r=decom.resizerImages(n,d,c,a);e.prev().find("img").attr({height:r.h,width:r.w}),e.attr("href","/#TB_inline?width="+r.w+"&height="+r.h+"&inlineId="+t)}})},resizerImages:function(e,t,o,m){return e>t?(rW=o,rH=Math.round(rW/e*(t-200)),rH>m&&(rHn=m,rW=Math.round(rHn/rH*rW),rH=rHn)):(rH=m-200,rW=Math.round(rH/t*e),rW>o&&(rWn=o,rH=Math.round(rWn/rW*rH),rW=rWn)),{w:rW,h:rH}},insertQuote:function(){var e=jQuery("#decomments-add-blockquote-form textarea"),t=jQuery(".decomments-addform-body textarea");e.length>1&&(e=e[1]);var o=e.val();o&&o.length>0&&(o="[quote]"+o+"[/quote] ",decom.insertAtCaret(t,o)),decom.closeQuote()},insertAtCaret:function(e,t){e[0]&&(e=e[0]);var o=e.scrollTop;if(decom.cfocus){var m=0;document.selection?(e.focus(),m=ieStrPos):m=e.selectionStart}else var m=0;var n=e.value.substring(0,m),d=e.value.substring(m,e.value.length);if(e.value=n+t+d,m+=t.length,document.selection){e.focus();var c=document.selection.createRange();c.moveStart("character",-e.value.length),c.moveStart("character",m),c.moveEnd("character",0)}else e.selectionStart=m,e.selectionEnd=m,e.focus();e.scrollTop=o},quoteShortcodeEncode:function(e){return e=e.replace(/<blockquote>[\n\r\t]*[<div>|<p>]+[\n\r\t]*<cite>[\n\r\t]*/gim,"[quote]"),e=e.replace(/[\n\r\t]*<\/cite>[\n\r\t]*[<\/div>|<\/p>]+[\n\r\t]*<\/blockquote>/gim,"[/quote]"),e=e.replace(new RegExp("\\s*</p>\\s*<p>\\s*","mgi"),"\n\n"),e=e.replace(new RegExp("<p>(\\s| )*</p>","mg"),"\n\n"),e=e.replace(new RegExp("<p>","mgi"),""),e=e.replace(new RegExp("\\s*</p>\\s*","mgi"),"\n"),e=e.replace(new RegExp("\\n\\s*\\n","mgi"),"\n\n"),e=e.replace(new RegExp("\\s*<br ?/?>\\s*","gi"),"\n")},quoteShortcodeDecode:function(e){return e=e.replace(/\[quote\]/gim,"<blockquote><div><cite>"),e=e.replace(/\[\/quote\]/gim,"</cite></div></blockquote>")},closeQuote:function(){decom.cfocus=!1,jQuery("#decomments-add-blockquote-form textarea").val(""),decom.closeModal(),tb_remove()},expiredEditComments:function(){setInterval(function(){jQuery(".decomments-expired-edit-time").each(function(){var e=jQuery(this),t=parseInt(e.text());t--,t<=0?e.parents(".decomments-change-list").remove():e.text(t)})},6e4)},checkSubscribe:function(e){jQuery(e).toggleClass("active")},validateSubscribe:function(e){return!!jQuery("[name="+e+"]").hasClass("active")},votes:function(e){decom.get_data();var t=jQuery(e).attr("data-res"),o=jQuery(e),m=jQuery(e).parents(".decomments-vote"),n=decom.getParentObj(e),d=decom.getId(n.attr("id")),c=decom.user_id,a=decom.admin_ajax+"?lang="+decom.lang+"&action=decom_comments&f=voting";m.addClass("loading"),jQuery.post(a,{fk_comment_id:d,fk_user_id:c,voice:t},function(e){if(e.success){var t=jQuery("#comment-"+e.success.cId),n=t.find("#decomments-vote-id-"+e.success.cId),d=n.parent().find(".decomments-like-link"),c=n.parent().find(".decomments-dislike-link"),a=parseInt(e.success.voice);0==parseInt(e.success.voice)&&m.find(".decomments-biggest-vote").fadeOut(),a>0&&n.attr("class","decomments-dislike")?(n.removeClass("decomments-dislike"),n.addClass("decomments-like-status decomments-like"),a="+"+a,m.find(".decomments-biggest-vote").fadeIn()):a<0&&n.attr("class","decomments-like")&&(n.removeClass("decomments-like"),n.addClass("decomments-like-status decomments-dislike"),m.find(".decomments-biggest-vote").fadeIn()),decom.votesFon(e,d,c),n.html(a),o.parents(".decomments-vote").find(".icon-clicked").removeClass("icon-clicked"),o.addClass("icon-clicked"),m.removeClass("loading")}else{m.removeClass("loading");var r=jQuery(".decomments-comment-section").attr("data-modal-alert");decom.showModal(this,r),jQuery("#decom-alert-void-text p").html(e.error)}})},votesFon:function(e,t,o){decom.get_data(),decom.multiple_vote&&e.myVoice>0?(t.addClass("decomments-voted-like"),o.removeClass("decomments-voted-dislike")):decom.multiple_vote&&e.myVoice<0?(t.removeClass("decomments-voted-like"),o.addClass("decomments-voted-dislike")):decom.multiple_vote?(o.removeClass("decomments-voted-dislike"),t.removeClass("decomments-voted-like")):jQuery(t).toggleClass("decomments-voted-like")},setCommentsNumber:function(e){decom.get_data();var t=parseInt(jQuery(".decomments-comments-number").html());0==t?jQuery(".decomments-comment-title").html(jQuery("#decomments-comment-section").data("decom_comment_single_translate")):1==e&&t>=1&&t<4?jQuery(".decomments-comment-title").html(jQuery("#decomments-comment-section").data("decom_comment_twice_translate")):1==e&&4==t?jQuery(".decomments-comment-title").html(jQuery("#decomments-comment-section").data("decom_comment_single_translate")):e==-1&&2==t?jQuery(".decomments-comment-title").html(jQuery("#decomments-comment-section").data("decom_comment_single_translate")):e==-1&&5==t?jQuery(".decomments-comment-title").html(jQuery("#decomments-comment-section").data("decom_comment_twice_translate")):e==-1&&1==t&&jQuery(".decom_comments_sort").hide();var o=t+e;jQuery(".decomments-comments-number").html(o)},recalculationCommentsNumbers:function(e,t){var o=0,m=jQuery("#comment-"+e).prev(".comment").find(".decomments-number span");if(m.length&&(o=m.eq(m.length-1).html()),0!==o){var n=jQuery("#comment-"+e).attr("parent-id");"0"!==n&&(o=jQuery("#comment-"+n).find(".decomments-number span").eq(0).html())}var d=0;0!==o&&(d=parseInt(o));var c=jQuery(".decomments-number span");jQuery(c).each(function(e){e>d?jQuery(this).html(e+t):e==d&&jQuery(this).html(d+t)})},tweet:function(e){var t=decom.getParentObj(e).eq(0),o=t.attr("id"),m=window.location.href.split("?")[0],m=m.split("#")[0],n=jQuery("#"+o).find(".decomments-description-block").eq(0).find(".decomments-text-holder"),d=n.text(),c,a="#"+o;a=encodeURIComponent(a),m+=a,c=m;var r=140-m.length;d=d.substring(0,r),d+="...";var s=window.open("https://twitter.com/share?url="+m+"&text="+d,"Twitter","width=500,height=400,resizable=yes,scrollbars=yes,status=yes");s.focus()},facebook:function(e){var t=decom.getParentObj(e).eq(0),o=t.attr("id"),m=window.location.href.split("?")[0],m=m.split("#")[0],n=window.open("http://www.facebook.com/sharer.php?u="+m+"?"+o,"facebook","width=500, height=400");n.focus()},vkontakte:function(e){var t=decom.getParentObj(e).eq(0),o=t.attr("id"),m=window.location.href.split("?")[0],m=m.split("#")[0],n=window.open("http://vkontakte.ru/share.php?url="+m+"?"+o,"vkontakte","width=500, height=400");n.focus()},google:function(e){var t=decom.getParentObj(e).eq(0),o=t.attr("id"),m=window.location.href.split("?")[0],m=m.split("#")[0],n=window.open("http://plus.google.com/share?url="+m+"?"+o+"&text=aaaaaaaa","google+","width=500, height=400");n.focus()},linkedin:function(e){var t=decom.getParentObj(e).eq(0),o=t.attr("id"),m=window.location.href.split("#")[0],m=m.split("#")[0],n=window.open("https://www.linkedin.com/shareArticle?mini=true&url="+m+"?"+o+"&summary=text","linkedin","width=1000, height=500");n.focus()},od:function(e){var t=decom.getParentObj(e).eq(0),o=t.attr("id"),m=window.location.href.split("#")[0],m=m.split("#")[0],n=window.open("http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+m,"Odnoklasniki","width=1000, height=500");n.focus()},closeModal:function(){jQuery("#deco_modal_window").remove(),jQuery("#deco_modal_overlay").remove()},showModal:function(e,t){if(jQuery("body").append(t),jQuery("#decomments-add-picture-form").length&&jQuery(".decomments-add-image[data-img]").length&&(jQuery("#decomments-add-picture-form").addClass("added-image"),jQuery("#decomments-add-picture-form img").attr("src",jQuery(".decomments-add-image").attr("data-img")),jQuery(".decomments-button-addfile-cancel").hide(),jQuery(".decomments-button-addfile-send").css("display","inline-block")),jQuery(e).hasClass("addedimg")){var o=jQuery(e).find("img.hiddenpic").attr("src");jQuery(".decom-attachment-full").attr("src",o)}jQuery("#decomments-add-blockquote-form").length>0&&jQuery("#decomments-add-blockquote-form").find("textarea").focus()},get_data:function(){jQuery(document).ready(function(){decom.site_url=jQuery("#decomments-form-add-comment").data("site-url"),decom.admin_ajax=decom.site_url+"/wp-admin/admin-ajax.php",decom.post_id=parseInt(jQuery("#decomments-comment-section").data("post_id")),decom.user_id=parseInt(jQuery("#decomments-comment-section").data("user_id")),decom.is_need_logged=parseInt(jQuery("#decomments-comment-section").data("is_need_logged")),decom.lang=jQuery("#decomments-comment-section").data("lang"),decom.text_lang_delete=jQuery("#decomments-comment-section").data("text_lang_delete"),decom.text_lang_not_zero=jQuery("#decomments-comment-section").data("text_lang_not_zero"),decom.text_lang_required=jQuery("#decomments-comment-section").data("text_lang_required"),decom.text_lang_checked=jQuery("#decomments-comment-section").data("text_lang_checked"),decom.text_lang_completed=jQuery("#decomments-comment-section").data("text_lang_completed"),decom.text_lang_items_deleted=jQuery("#decomments-comment-section").data("text_lang_items_deleted"),decom.text_lang_close=jQuery("#decomments-comment-section").data("text_lang_close"),decom.text_lang_loading=jQuery("#decomments-comment-section").data("text_lang_loading"),decom.multiple_vote=parseInt(jQuery("#decomments-comment-section").data("multiple_vote"))})}};jQuery(document).ready(function(){decom.get_data()}),jQuery(document).on("click",'[role="toggle_forgot_password_form"]',function(e){e.preventDefault(),jQuery(this).parents(".login-form-block").find(".flipper").toggleClass("rotate")}),jQuery(document).on("click",".close-modal",function(){jQuery(".modal-login").removeClass("open")}),jQuery(this).keydown(function(e){27==e.which&&jQuery(".modal-login").removeClass("open")}),jQuery(document).on("click touchstart",function(e){jQuery(e.target).parents().hasClass("login-form")||jQuery(e.target).hasClass("login-form")||jQuery(".modal-login").removeClass("open")});